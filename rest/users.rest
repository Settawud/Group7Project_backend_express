@base = http://localhost:4000
@ts = {{$timestamp}}
@email = ada.{{ts}}@example.com

### Login user (adjust email if needed)
# @name login
POST {{base}}/api/v1/mongo/auth/login
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "secret123"
}

###
@token = {{login.response.body.token}}

### Me: get profile
GET {{base}}/api/v1/mongo/users/me
Authorization: Bearer {{token}}

### Me: update profile
PATCH {{base}}/api/v1/mongo/users/me
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "firstName": "Ada",
  "lastName": "Updated",
  "phone": "0123456789"
}

### Me: change password
PATCH {{base}}/api/v1/mongo/users/me/password
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "oldPassword": "secret123",
  "newPassword": "secret456"
}

### Me: upload/replace profile image (PUT)
PUT {{base}}/api/v1/mongo/users/me/image
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="image"; filename="chair.jpg"
Content-Type: image/jpeg

< ./chair.jpg
--WebAppBoundary--

### Me: update addresses (example)
PATCH {{base}}/api/v1/mongo/users/me
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "addresses": [
    {
      "addressId": "REPLACE_ADDRESS_ID",
      "buildingNo": "99/1",
      "detail": "หมู่บ้านตัวอย่าง ซอย 5",
      "postcode": "10200",
      "subdistrict": "REPLACE_SUBDISTRICT_ID",
      "district": "REPLACE_DISTRICT_ID",
      "province": "REPLACE_PROVINCE_ID",
      "is_default": true
    }
  ]
}

### Me: delete profile image
DELETE {{base}}/api/v1/mongo/users/me/image
Authorization: Bearer {{token}}
